<head>
	<title>Tasks</title>
</head>

<body>

	<div id="g-timeline">
		<ul id="g-dates">
			{{> dates }}
		</ul>
		<dl id="g-resources">
			{{> resources }}
		</dl>
		<div id="g-controls">
			<label id="zoom-slider">
				<span>Zoom</span>
				<input type="range" min="1" max="3" value="2" step="1" list="zoom">
				<datalist id="zoom">
					<option>1</option>
					<option>2</option>
					<option>3</option>
				</datalist>
			</label>
		</div>
	</div>

	<div id="g-filters">
		{{> filters}}
	</div>

	<div id="g-projects">
		{{> projects}}
	</div>

	<div id="g-tasks">
		{{> tasks}}
	</div>

	{{initFoundation}}

</body>

<template name="dates">
	{{#each months}}
		<li class="month">
			<h3 class="month-title">{{name}}</h3>
			<ul class="days">
				{{#each days}}
					<li class="day" data-dow="{{dow}}"><h4 class="day-title">{{num}}</h4></li>
				{{/each}}
			</ul>
		</li>
	{{/each}}
</template>

<template name="resources">
	<dt class="resource-name"><a href="#">Jake</a></dt>
		<dd class="resource-timeline">
			<ul class="resource-tasks" data-capacity="1">
				<li class="resource-task tip-top" data-size="4" data-tooltip title="test1"><a href="#">test 1</a></li>
				<li class="resource-task tip-top" data-size="2" data-tooltip title="test2"><a href="#">test 2</a></li>
				<li class="resource-task tip-top" data-size="1" data-tooltip title="test3"><a href="#">test 3</a></li>
				<li class="resource-task tip-top" data-size="8" data-tooltip title="test4"><a href="#">test 4</a></li>
			</ul>
		</dd>
	<dt class="resource-name"><a href="#">Jake</a></dt>
		<dd class="resource-timeline">
			<ul class="resource-tasks" data-capacity=".5">
				<li class="resource-task tip-top" data-size="4" data-tooltip title="test1"><a href="#">test 1</a></li>
				<li class="resource-task tip-top" data-size="2" data-tooltip title="test2"><a href="#">test 2</a></li>
				<li class="resource-task tip-top" data-size="1" data-tooltip title="test3"><a href="#">test 3</a></li>
				<li class="resource-task tip-top" data-size="8" data-tooltip title="test4"><a href="#">test 4</a></li>
			</ul>
		</dd>
</template>

<template name="projects">
	<h3>Projects</h3>
	{{#if loading}}
		<div id="projects">Loading...</div>
	{{else}}
		<div id="projects">
			{{#each projects}}
				<div class="project {{selected}}">
					{{#if editing}}
						<div class="edit">
							<input class="project-name-input" id="project-name-input" type="text" value="{{name}}" />
						</div>
					{{else}}
						<div class="display">
							<a class="project-name {{name_class}}" href="/{{_id}}">
								{{name}}
							</a>
						</div>
					{{/if}}
				</div>
			{{/each}}
		</div>
		<div id="createProject">
			<input type="text" id="new-project" placeholder="New project" />
		</div>
	{{/if}}
</template>

<template name="tasks">
	{{#if any_project_selected}}
		<div id="items-view">
			{{#if loading}}
				Loading...
			{{else}}
				<div id="new-task-box">
					<input type="text" id="new-task" placeholder="New item" />
				</div>
				<ul id="item-project">
					{{#each tasks}}
						{{> task_item}}
					{{/each}}
				</ul>
			{{/if}}
		</div>
	{{/if}}
</template>

<template name="task_item">
	<li class="task {{done_class}}">
		{{#if editing}}
			<div class="edit">
				<input id="task-input" type="text" value="{{text}}" />
			</div>
		{{else}}
			<div class="destroy"></div>
			<div class="display">
				<input class="check" name="markdone" type="checkbox" checked={{done}} />
				<div class="task-text">{{text}}</div>
			</div>
		{{/if}}
		<div class="item-tags">
			{{#each tag_objs}}
				<div class="tag removable_tag">
					<div class="name">{{tag}}</div>
					<div class="remove"></div>
				</div>
			{{/each}}
			{{#if adding_tag}}
				<div class="tag edittag">
					<input type="text" id="edittag-input" value="" />
				</div>
			{{else}}
				<div class="tag addtag">
					+tag
				</div>
			{{/if}}
		</div>
	</li>
</template>

<template name="filters">
	<div id="filters" class="tags">
		<div class="label">Show:</div>
		{{#each tags}}
			<div class="tag {{selected}}">
				{{tag_text}} <span class="count">({{count}})</span>
			</div>
		{{/each}}
	</div>
</template>
